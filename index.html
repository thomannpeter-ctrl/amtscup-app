<!doctype html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Amtscup – Cup-Duell (bis zu drei Gruppen)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
/* ===== STYLE unverändert (gekürzt hier nicht sinnvoll) ===== */
*{box-sizing:border-box}
body{font-family:system-ui,sans-serif;background:#eef2f7;margin:0;color:#111827}
.container{max-width:1100px;margin:auto;padding:1rem}
.card{background:#fff;border-radius:12px;padding:1rem 1.25rem;box-shadow:0 4px 10px rgba(15,23,42,.08);margin-bottom:1rem}
h1{color:#1e3a8a;margin:0 0 1rem}
h2{color:#1d4ed8;margin:.5rem 0}
.row{display:flex;flex-wrap:wrap;gap:.75rem}
.field{flex:1;min-width:200px}
label{font-size:.8rem;font-weight:600}
input,select{width:100%;padding:.45rem;border-radius:8px;border:1px solid #cbd5f5}
table{width:100%;border-collapse:collapse;font-size:.85rem}
th,td{border:1px solid #e5e7eb;padding:.35rem;text-align:center}
th{background:#dbeafe}
.sum-cell{background:#f3f4f6;font-weight:600}
.winner-box{padding:.6rem;border-radius:999px;font-weight:600}
.winner-none{background:#e5e7eb}
.winner-g1{background:#dcfce7;color:#166534}
.winner-g2{background:#dbeafe;color:#1d4ed8}
.winner-g3{background:#fee2e2;color:#b91c1c}
.winner-draw{background:#fef9c3;color:#854d0e}
</style>
</head>

<body>
<div class="container">
<h1>Amtscup – Cup-Duell (bis zu drei Gruppen)</h1>

<div class="card">
<h2>1. Gruppenchef & Gruppen</h2>
<div class="row">
<div class="field">
<label>Name Gruppenchef</label>
<input id="chefName">
</div>
<div class="field">
<label>E-Mail Gruppenchef</label>
<input id="chefEmail" type="email">
</div>
</div>

<div class="row">
<div class="field">
<label>Gruppe 1</label>
<select id="gruppe1Select"></select>
</div>
<div class="field">
<label>Gruppe 2</label>
<select id="gruppe2Select"></select>
</div>
<div class="field">
<label>Gruppe 3 (optional)</label>
<select id="gruppe3Select"></select>
</div>
</div>

<button id="addGroup3Btn" type="button">➕ 3. Gruppe hinzufügen (optional)</button>
</div>

<div class="card">
<h2>5. Vergleich & Sieger</h2>
<div id="winnerBox" class="winner-box winner-none">
Noch keine Resultate erfasst.
</div>
</div>
</div>

<script>
/* ===============================
   GRUPPEN NUR AUS gruppen.txt
   =============================== */

let group3Enabled=false;
let groupsList=[];

function parseGroups(text){
return text.split(/\r?\n/)
.map(l=>l.trim())
.filter(l=>l && !l.startsWith("#"));
}

async function loadGroups(){
const r=await fetch("gruppen.txt?ts="+Date.now(),{cache:"no-store"});
groupsList=parseGroups(await r.text());

["gruppe1Select","gruppe2Select","gruppe3Select"].forEach(id=>{
const s=document.getElementById(id);
if(!s) return;
s.innerHTML="<option value=''>Bitte wählen …</option>";
groupsList.forEach(g=>{
const o=document.createElement("option");
o.value=o.textContent=g;
s.appendChild(o);
});
});
updateGroupTitles();
}

function getGroupName(n){
const sel=document.getElementById("gruppe"+n+"Select");
return sel && sel.value ? sel.value : "Gruppe "+n;
}

function updateGroupTitles(){
document.getElementById("winnerBox").textContent=
"Auswahl: "+getGroupName(1)+" / "+getGroupName(2)+(group3Enabled?" / "+getGroupName(3):"");
}

document.addEventListener("DOMContentLoaded",()=>{
loadGroups();
document.getElementById("gruppe1Select").addEventListener("change",updateGroupTitles);
document.getElementById("gruppe2Select").addEventListener("change",updateGroupTitles);
document.getElementById("gruppe3Select").addEventListener("change",updateGroupTitles);

document.getElementById("addGroup3Btn").addEventListener("click",()=>{
group3Enabled=!group3Enabled;
document.getElementById("gruppe3Select").style.display=group3Enabled?"block":"none";
updateGroupTitles();
});
});
</script>
</body>
</html>
